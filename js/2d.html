<!DOCTYPE html>
<meta charset="utf-8"/>
<html>
	<head>
        <style>
            h2 {font-family:Arial, Helvetica, sans-serif; }
            label {font-family:Arial, Helvetica, sans-serif; }
			text {font-family:Arial, Helvetica, sans-serif; }
        </style>
    </head>
	<body style="background-color: rgb(255, 255, 255);">
		<!--
			How to get floating divs to work:
			https://stackoverflow.com/q/2006134 by eric-d-bari
			https://stackoverflow.com/a/2006162 by marcgg
		!-->
		<!--
			<div id="hoveringElements" style="position: relative; z-index: 10;">
				<div id="stats" style="position: absolute; top: 0px; right: 0px">
					<label id="hoveringStats" 
						style="color: white;", hidden: true>This is some text.</label>
			</div>
		!-->
		</div>
			 <div style="display: grid; grid-template-columns: 1fr 1fr 1fr;">
				<div style="grid-column: 1; /*background-color: rgb(200, 200, 200);*/">
					<label><a id="aLink" style="color: rgb(100, 100, 100); text-align: center; /*text-decoration-line: none;*/">Source</a></label><br>
					<!--<hr style="width: 95%; justify-self: left;"></hr>!-->
					<label for="stepsPerFrame" id="stepsPerFrameLabel">Updates/frame
					</label>
					<br>
					<input type="range" id="stepsPerFrame"
					name="steps/frame"
					min="0" max="20.0" value="2.0"
					style="width: 95%;"/>
					<!--Default should be 2.-->
					<br>
					<label id="fps">fps: </label><br>
					<!--<hr style="text-align: start;"/>!-->
					<button type="button"
						aria-pressed="true" id="newWaveFuncButton">New Ψ</button>
					<br>
					<button type="button"
						aria-pressed="true" id="sketchButton">Sketch V</button>
					<button type="button"
						aria-pressed="true" id="eraseButton">Erase V</button>
					<br>
					<label for="sketchWidth" id="sketchWidthLabel">Sketch size</label>
					<br>
					<input type="range" id="sketchWidth" name="sketchWidth"
						min="0" max="100" value="50"
						style="width: 95%;"/>
					<br>
					<input type="checkbox" id="showPotential" checked="true"></input>
					<label for="showPotential">Show V(<b>r</b>)</label>
					<!--<label for="showPotential">Show V(x, y)</label>!-->
					<br>
					<input type="checkbox" id="showMomentumSpacePsi"></input>
					<label for="showMomentumSpacePsi">Show Ψ(<b>p</b>)</label><br>
					<input type="checkbox" id="showSurface"></input>
					<label for="showSurface">3D display</label>
					<br>
					<label for="angularVel" id="angularVelLabel">3D auto-rotate
					</label>
					<br>
					<input type="range" id="angularVel"
							name="angularVel"
							min="-100.0" max="100.0" value="0.0"
							style="width: 95%;"/>
					<br>
					<label for="timeStepReal" id="timeStepRealLabel">Re(Δt)
					</label>
					<br>
					<input type="range" id="timeStepReal"
							name="timeStepReal"
							min="-80.0" max="80.0" value="64.0"
							style="width: 95%;"/>
					<!--default value should be 64.-->
					<br>
					<label for="timeStepImag" id="timeStepImagLabel">Im(Δt)
					</label>
					<br>
					<input type="range" id="timeStepImag"
							name="timeStepImag"
							min="-200.0" max="0.0" value="0.0"
							style="width: 95%;"/>
					<br>
					<input type="checkbox" id="normalizePsi"/>
					<label for="normalizePsi">Normalize Ψ after each frame</label><br/><br/>
					<label id="displayMousePosition", style="opacity: 0;">x: 0, y: 0</label><br/>
					<label id="displayInitialMomentum", style="opacity: 0;"> &lt;px&gt;: 0, &lt;py&gt;: 0</label>
					<!--<label style="text-align: center;"> at each frame</label><br>!-->
				</div>
				<div style="grid-column: 2">
					<canvas style="
									touch-action: none; background-color: rgb(50, 50, 50);
								   text-align: center;"
						id="sketchCanvas"></canvas>
				</div>
				<!--<div style="grid-column: 3; width: 0%"></div>!-->
				<div style="grid-column: 3; resize: vertical; padding: 10px">
					<label>Simulation domain</label><br>
					<label id="xRangeLabel"> -128 &leq; x &lt; 128</label><br>
					<label id="yRangeLabel"> -128 &leq; y &lt; 128</label><br>
					<label id="changeGridLabel" for="changeGrid">Grid size
					</label>
					<select id="changeGrid">
						<option value=16>16x16</option>
						<option value=32>32x32</option>
						<option value=64>64x64</option>
						<option value=128>128x128</option>
						<option value=256>256x256</option>
						<option value=512>512x512</option>
						<option value=1024>1024x1024</option>
						<option value=2048>2048x2048</option>
					</select><br>
					<hr>
					<label for="presetPotential">Preset V(x, y, t)<br>
						<select id="presetPotential">
							<option value=0 selected>Free (periodic)</option>
							<option value=1>Harmonic</option>
							<option value=2>Double slit</option>
							<option value=3>Circular well</option>
							<option value=4>Spike</option>
							<option value=5>Upside down spike</option>
							<option value=6>Absorbing boundaries (A.B.)</option>
							<option value=7>Double slit (A.B.)</option>
							<option value=8>Spike (A.B.)</option>
							<option value=9>Upside down spike (A.B.)</option>
							<option value=10>Moving Gaussian</option>
							<!--<option value=11>Moving att. spike (A.B.)</option>!-->
							<option value=12>Upside down Gaussian</option>
							<!--<option value=13>Rotating harmonic</option>!-->
						</select>
					</label><br>
					<label for="potentialEntry">Enter V(x, y, t)<br>
						<input type ="text" id="potentialEntry"
						value="a*((x/width)^2+(y/height)^2)"
						name="potentialEntry" size="23"
						/>
					<br>
					</label>
					<label id="potentialClippedMessage">
						To reduce numerical error,<br/>
						V will be clipped so that<br/>
						|V(x, y, t)| &lt; 2
					</label>
					<div id="potentialUserSliders"></div>
					<hr/>
					<div>
						<label for="uploadImage">Set V using image
							<input id="uploadImage" type="file">
					</label><br>
					<label>Will look pixilated for smaller grid sizes.</label>
					</div>
					<hr/>
					<label for="presetNonlinear">Preset nonlinear term<br>
						<select id="presetNonlinear" style="width: 48;">
							<option value=0 selected>None</option>
							<option value=1>100*abs(a*psi)^2</option>
							<!-- 100.0*abs(a*psi)^2 - 0.016*a -->
							<option value=2>a*exp(-abs(psi)^2/0.01^2)</option>
							<option value=3>Combination of above two</option>
						</select>
					</label>
					<br>
					<label for="nonlinearEntry">Enter nonlinearity f(Ψ)<br>
						<input type="text" id="nonlinearEntry"
							name="nonlinearEntry" size="23" value="">
					</label>
					<br>
					<div id="nonlinearUserSliders"></div>
					<hr/>
					<!--<label for="presetKineticEnergy">Preset kinetic term<br>
						<select id="presetNonlinear" style="width: 48;">
							<option value=0 selected>None</option>
							<option value=1>(px^2 + py^2)/(2.0*m)</option>
							<option value=2>(px^2 + py^2)^0.5</option>
						</select>
					</label>
					<br>-->
					<label for="kineticEnergyEntry">Kinetic energy-momentum<br>relation: KE(px, py)<br>
						<input type="text" id="kineticEnergyEntry"
							name="nonlinearEntry" size="23" value="(px^2+py^2)/(2*m)">
					</label>
					<br>
					<div id="kineticEnergyUserSliders"></div><hr>
					<input type="checkbox" id="screenshots"/>
					<label for="screenshots" id="screenshotsLabel">Capture frames</label><br/><br/>
				</div>
			</div>
			<div> <img id="image" hidden="true"> </div>
			<div> <canvas id="imageCanvas" hidden="true"> </div>
		<script>const LENGTH=256;</script>
		<script type="module" src="./sim2d.js"></script>
	</body>
</html>
