<!DOCTYPE html>
<meta charset="utf-8"/>
<html>
	<head>
        <style>
            h2 {font-family:Arial, Helvetica, sans-serif; }
            label {font-family:Arial, Helvetica, sans-serif; }
			text {font-family:Arial, Helvetica, sans-serif; }
        </style>
    </head>
	<body style="background-color: rgb(255, 255, 255);">
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr;">
            <div style="grid-column: 1;">
                <!--max-width:55%;!-->
                <label for="stepsPerFrame" id="stepsPerFrameLabel">Updates/frame</label>
                <br>
                <input type="range" id="stepsPerFrame" min="0" max="4.0" value="0.0"
                    style="width: 95%;">
                <br>
                <label id="fps">fps: </label>
                <hr style="width: 95%; justify-self: right;"/>
                <button type="button"
					aria-pressed="true" id="rotateViewButton">Rotate view</button>
				<br>
                <button type="button"
					aria-pressed="true" id="newWaveFuncButton">New Ψ</button>
				<br>
                <button type="button"
					aria-pressed="true" id="sketchVButton">Sketch V</button>
                <button type="button"
					aria-pressed="true" id="eraseVButton">Erase V</button>
				<br>
                <label for="sketchWidth" id="sketchWidthLabel">Size</label>
				<br>
                <input type="range" id="sketchWidth" name="sketchWidth"
                min="0" max="100" value="50"
                style="width: 95%;"/>
                <br>
                <label for="sketchDepth" id="sketchDepthLabel">Depth</label>
				<br>
                <input type="range" id="sketchDepth" name="sketchDepth"
                min="-40" max="40" value="0"
                style="width: 95%;"/>
                <br>
                <hr style="width: 95%; justify-self: left;"/>
                <div id="brightnessControls" style="border: 10px; border-color: black;">
                    <!--<label>Brightness:</label><br>!-->
                    <input type="checkbox" id="showWavefunction" checked="true"></input>
                    <label for="showWavefunction">Show Ψ(<b>r</b>)</label><br>
                    <input type="checkbox" id="showWavefunctionPhase" checked="true"></input>
                    <label for="showWavefunctionPhase">Colour phase</label><br>
                    <label for="wavefunctionBrightness">Ψ brightness:</label><br>
                    <input type="range" id="wavefunctionBrightness"
                        min="5" max="100" value="10"
                        style="width: 95%;"/>
                    <label for="absPsiVisualization">Map brightness from: </label>
                    <select id="absPsiVisualization">
                        <option value=1>|Ψ(<b>r</b>)|</option>
                        <option value=2>|Ψ(<b>r</b>)|²</option>
                        <option value=-1>1 / |Ψ(<b>r</b>)|</option>
                        <!--<option value=512>512x512x512</option>!-->
                    </select><br>
                    <input type="checkbox" id="showPotential" checked="false"></input>
                    <label for="showPotential">Show V(<b>r</b>)</label><br>
                    <label for="potentialBrightness">V(<b>r</b>)  brightness:</label>
                    <br>
                    <input type="range" id="potentialBrightness"
                        min="0" max="100" value="10"
                    style="width: 95%;"/>
                    <br>
                </div>
                <hr style="width: 95%; justify-self: left;"/>
                <label id="viewModeLabel" for="viewMode">View type: 
                </label>
                <select id="viewMode">
                    <option value=1>Planar slices</option>
                    <option value=2 selected>Volume render</option>
                </select><br>
                <div id="planarSlicesControls">
                    <label for="zIndex" id="zIndexLabel">xy slice - z offset:</label>
                    <br>
                    <input type="range" id="zIndex"
                        min="0" max="255" value="127"
                    style="width: 95%;"/>
                    <br>
                    <label for="xIndex" id="xIndexLabel">yz slice - x offset:</label>
                    <br>
                    <input type="range" id="xIndex"
                        min="0" max="255" value="127"
                    style="width: 95%;"/>
                    <br>
                    <label for="yIndex" id="yIndexLabel">zx slice - y offset:</label>
                    <br>
                    <input type="range" id="yIndex"
                        min="0" max="255" value="127"
                    style="width: 95%;"/>
                    <br>
                </div>
                <div id="volumeRenderControls" hidden>
                </div>
            </div>
            <div style="grid-column: 2">
                <canvas style="touch-action: none; background-color: rgb(50.0, 50.0, 50.0);
                               text-align: center;"
                    id="sketchCanvas"></canvas>
            </div>
            <div style="grid-column: 3; padding: 10px;">
                <label id="changeGridLabel" for="changeGrid">Grid size
                </label>
                <select id="changeGrid">
                    <option value=64>64x64x64</option>
                    <option value=128>128x128x128</option>
                    <option value=256>256x256x256</option>
                    <!--<option value=512>512x512x512</option>!-->
                </select><br>
                <hr/>
                <label for="presetPotential">Preset V(x, y, z, t)<br>
                    <select id="presetPotential">
                        <option value=0>Free (periodic)</option>
                        <option value=1>Harmonic</option>
                        <option value=2>Double slit</option>
                        <option value=3>Spherical well</option>
                        <option value=4>Ball spike</option>
                        <option value=5>Inverted ball spike</option>
                        <option value=6 selected>Absorbing boundaries (A.B.)</option>
                        <option value=7>Double slit (A.B.)</option>
                        <option value=8>Ball spike (A.B.)</option>
                        <option value=9>Inverted ball spike (A.B.)</option>
                        <option value=10>Moving Gaussian</option>
                        <!--<option value=11>Moving att. spike (A.B.)</option>!-->
                        <!--<option value=12>Upside down Gaussian</option>!-->
                        <!--<option value=13>Rotating harmonic</option>!-->
                    </select>
                </label><br>
                <label for="potentialEntry">Enter V(x, y, z, t)<br>
                    <input type ="text" id="potentialEntry"
                    value="a*((x/width)^2+(y/height)^2+(z/depth)^2)"
                    name="potentialEntry" size="40"
                    />
                <br>
                <div id="potentialUserSliders"></div>
                <hr/>
                <label for="presetNonlinear">Preset nonlinear term<br>
                    <select id="presetNonlinear" style="width: 48;">
                        <option value=0 selected>None</option>
                        <option value=1>1000*abs(a*psi)^2</option>
                        <!-- 100.0*abs(a*psi)^2 - 0.016*a -->
                        <option value=2>a*exp(-abs(psi)^2/0.01^2)</option>
                        <option value=3>Combination of above two</option>
                    </select>
                </label>
                <br>
                <label for="nonlinearEntry">Enter nonlinearity f(Ψ)<br>
                    <input type="text" id="nonlinearEntry"
                        name="nonlinearEntry" size="40" value="">
                </label>
                <br>
                <div id="nonlinearUserSliders"></div>
                <hr/>
                <label for="kineticEnergyEntry">Kinetic energy-momentum<br>relation: KE(px, py, pz)<br>
                    <input type="text" id="kineticEnergyEntry"
                        name="nonlinearEntry" size="40" value="(px^2+py^2+pz^2)/(2*m)">
                </label>
                <br>
                <div id="kineticEnergyUserSliders"></div>
                <hr/>
                <label for="timeStepReal" id="timeStepRealLabel">Re(Δt)
                </label>
                <br>
                <input type="range" id="timeStepReal"
                        name="timeStepReal"
                        min="-80.0" max="80.0" value="64.0"
                        style="width: 95%;"/>
                <!--default value should be 64.-->
                <br>
                <label for="timeStepImag" id="timeStepImagLabel">Im(Δt)
                </label>
                <br>
                <input type="range" id="timeStepImag"
                        name="timeStepImag"
                        min="-200.0" max="0.0" value="0.0"
                        style="width: 95%;"/>
                <br>
                <input type="checkbox" id="normalizePsi"/>
					<label for="normalizePsi">Normalize Ψ after each frame</label><br/>
            </div>
        </div>
        <script type="module" src="./sim3d.js"></script>
    </body>
</html>
